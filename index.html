<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ü–µ–Ω–Ω–æ—Å—Ç—è–º–∏ –ø–æ –º–µ—Ç–æ–¥—É ACT">
    <meta name="theme-color" content="#667eea">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="./manifest.json">
    
    <!-- iOS Support -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="–¶–µ–Ω–Ω–æ—Å—Ç–∏">
    <link rel="apple-touch-icon" href="./icon-192.png">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="192x192" href="./icon-192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="./icon-512.png">
    
    <title>–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ü–µ–Ω–Ω–æ—Å—Ç–µ–π - ACT –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }
        
        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        header p {
            font-size: 1.1em;
            opacity: 0.9;
        }
        
        .instructions {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .instructions h2 {
            color: #667eea;
            margin-bottom: 10px;
        }
        
        .sorting-container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .columns-wrapper {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
        }
        
        .column {
            min-height: 500px;
        }
        
        .column-header {
            text-align: center;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            font-weight: bold;
            font-size: 1.2em;
            color: white;
        }
        
        .header-high {
            background-color: #22c55e;
        }
        
        .header-medium {
            background-color: #f59e0b;
        }
        
        .header-low {
            background-color: #ef4444;
        }
        
        .header-highest {
            background-color: #10b981;
        }
        
        .drop-zone {
            min-height: 450px;
            padding: 15px;
            border: 2px dashed #d1d5db;
            border-radius: 10px;
            transition: all 0.3s;
        }
        
        .drop-zone.drag-over {
            background-color: #f3f4f6;
            border-color: #667eea;
            border-style: solid;
        }
        
        .card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            cursor: move;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            user-select: none;
            touch-action: none;
        }
        
        .card:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }
        
        .card.dragging {
            opacity: 0.5;
        }
        
        .card-title {
            font-size: 1.05em;
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .card-questions {
            font-size: 0.85em;
            opacity: 0.95;
            line-height: 1.4;
        }
        
        .action-buttons {
            text-align: center;
            margin-top: 30px;
        }
        
        .btn {
            padding: 15px 30px;
            font-size: 1.1em;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 0 10px;
            transition: all 0.3s;
            font-weight: bold;
        }
        
        .btn-primary {
            background-color: #667eea;
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #5568d3;
        }
        
        .btn-secondary {
            background-color: #6b7280;
            color: white;
        }
        
        .btn-secondary:hover {
            background-color: #4b5563;
        }
        
        .comparison-container {
            background: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            display: none;
        }
        
        .comparison-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .comparison-header h2 {
            color: #667eea;
            font-size: 2em;
            margin-bottom: 10px;
        }
        
        .comparison-progress {
            text-align: center;
            color: #6b7280;
            font-size: 1.1em;
            margin-bottom: 30px;
        }
        
        .comparison-question {
            text-align: center;
            font-size: 1.3em;
            color: #1f2937;
            margin-bottom: 30px;
            font-weight: 500;
        }
        
        .comparison-cards {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            max-width: 900px;
            margin: 0 auto;
        }
        
        .comparison-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
        }
        
        .comparison-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.3);
        }
        
        .comparison-card-title {
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        .comparison-card-questions {
            font-size: 1em;
            opacity: 0.95;
            line-height: 1.5;
        }
        
        .summary {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            display: none;
        }
        
        .summary h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 2em;
        }
        
        .summary-section {
            margin-bottom: 25px;
        }
        
        .summary-section h3 {
            color: #333;
            margin-bottom: 10px;
            font-size: 1.3em;
        }
        
        .summary-section ul {
            list-style: none;
            padding-left: 0;
        }
        
        .summary-section li {
            padding: 10px;
            margin-bottom: 5px;
            background-color: #f3f4f6;
            border-radius: 5px;
        }
        
        .ranked-list {
            counter-reset: item;
        }
        
        .ranked-list li {
            counter-increment: item;
            position: relative;
            padding-left: 40px;
        }
        
        .ranked-list li::before {
            content: counter(item);
            position: absolute;
            left: 10px;
            top: 50%;
            transform: translateY(-50%);
            background-color: #667eea;
            color: white;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9em;
        }
        
        .values-container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            display: none;
        }
        
        .values-columns {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
        }
        
        .values-column {
            min-height: 500px;
        }
        
        .values-column-header {
            text-align: center;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            font-weight: bold;
            font-size: 1.1em;
            color: white;
        }
        
        .values-drop-zone {
            min-height: 450px;
            padding: 15px;
            border: 2px dashed #d1d5db;
            border-radius: 10px;
            transition: all 0.3s;
        }
        
        .values-drop-zone.drag-over {
            background-color: #f3f4f6;
            border-color: #667eea;
            border-style: solid;
        }
        
        .value-card {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #ec4899 100%);
            color: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            cursor: move;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            user-select: none;
            touch-action: none;
        }
        
        .value-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }
        
        /* –°—Ç–∏–ª—å –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏ "–î—Ä—É–≥–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å" */
        .value-card.editable-card {
            background: linear-gradient(135deg, #f59e0b 0%, #f97316 50%, #ef4444 100%);
            border: 2px solid #fbbf24;
            position: relative;
            cursor: pointer;
        }
        
        .value-card.editable-card:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 6px 12px rgba(245, 158, 11, 0.4);
        }
        
        .value-card.editable-card .edit-icon {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 1.2em;
        }
        
        .value-card-title {
            font-size: 1em;
            font-weight: bold;
            margin-bottom: 6px;
        }
        
        .value-card-desc {
            font-size: 0.85em;
            opacity: 0.95;
            line-height: 1.4;
        }
        
        /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ü–µ–Ω–Ω–æ—Å—Ç–∏ */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        
        .modal-overlay.active {
            display: flex;
        }
        
        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 15px;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }
        
        .modal-header {
            color: #667eea;
            font-size: 1.5em;
            margin-bottom: 20px;
            font-weight: bold;
        }
        
        .modal-input-group {
            margin-bottom: 20px;
        }
        
        .modal-label {
            display: block;
            margin-bottom: 8px;
            color: #374151;
            font-weight: 600;
        }
        
        .modal-input,
        .modal-textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #d1d5db;
            border-radius: 8px;
            font-size: 1em;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            transition: border-color 0.3s;
        }
        
        .modal-input:focus,
        .modal-textarea:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .modal-textarea {
            resize: vertical;
            min-height: 100px;
        }
        
        .modal-hint {
            font-size: 0.85em;
            color: #6b7280;
            margin-top: 10px;
            font-style: italic;
        }
        
        .final-values-summary {
            background: #ffffff;
            padding: 30px 30px 25px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.06);
            margin-top: 20px;
            display: none;
        }
        
        .final-values-summary h2 {
            margin-bottom: 20px;
            font-size: 1.8em;
            color: #4f46e5;
            text-align: left;
        }
        
        .final-values-summary-header {
            font-size: 0.95em;
            color: #374151;
            margin-bottom: 20px;
        }
        
        .final-values-summary-header strong {
            font-weight: 600;
        }
        
        .final-values-summary-section {
            margin-bottom: 25px;
        }
        
        .final-values-summary-section h3 {
            margin-bottom: 12px;
            font-size: 1.15em;
            color: #111827;
        }
        
        .final-values-summary-section ul {
            list-style: none;
            padding-left: 0;
            margin: 0;
        }
        
        .final-values-summary-section li {
            padding: 8px 12px;
            margin-bottom: 6px;
            background-color: #f3f4f6;
            border-radius: 6px;
            font-size: 0.95em;
            display: flex;
            align-items: center;
        }
        
        .final-values-summary .ranked-list {
            counter-reset: item;
        }
        
        .final-values-summary .ranked-list li {
            position: relative;
            padding-left: 42px;
        }
        
        .final-values-summary .ranked-list li::before {
            content: counter(item);
            counter-increment: item;
            position: absolute;
            left: 10px;
            top: 50%;
            transform: translateY(-50%);
            width: 22px;
            height: 22px;
            border-radius: 999px;
            background-color: #4f46e5;
            color: #ffffff;
            font-size: 0.8em;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .final-values-group-label {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            color: #047857;
            margin-top: 16px;
            margin-bottom: 8px;
        }
        
        .final-values-group-dot {
            width: 10px;
            height: 10px;
            border-radius: 999px;
            background-color: #22c55e;
        }
        
        /* Committed Action */
        .committed-action-section {
            margin-top: 25px;
            padding: 20px 18px;
            background-color: #fef3c7;
            border-left: 5px solid #f59e0b;
            border-radius: 10px;
        }
        
        .committed-action-section h3 {
            color: #92400e;
            margin-bottom: 14px;
            font-size: 1.15em;
        }
        
        .committed-action-section p {
            color: #78350f;
            margin-bottom: 8px;
            line-height: 1.5;
            font-size: 0.95em;
        }
        
        .refined-sorting-container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            display: none;
        }
        
        @media (max-width: 1024px) {
            .columns-wrapper,
            .values-columns,
            .comparison-cards {
                grid-template-columns: 1fr;
            }
            
            .column,
            .values-column {
                min-height: auto;
            }
            
            .drop-zone,
            .values-drop-zone {
                min-height: 200px;
            }
        }
        
        @media (max-width: 768px) {
            header h1 {
                font-size: 1.8em;
            }
            
            .btn {
                display: block;
                width: 100%;
                margin: 10px 0;
            }
            
            .comparison-container {
                padding: 20px;
            }
            
            .comparison-cards {
                grid-template-columns: 1fr;
            }
            
            /* –ú–æ–±–∏–ª—å–Ω–∞—è –∫–∞—Ä—É—Å–µ–ª—å –∫–æ–ª–æ–Ω–æ–∫ */
            .columns-wrapper,
            .values-columns {
                display: flex !important;
                flex-direction: row !important;
                gap: 10px !important;
                width: 100% !important;
                align-items: stretch !important;
            }

            .column,
            .values-column {
                min-height: 400px !important;
                transition: all 0.3s ease !important;
                flex-shrink: 0 !important;
            }

            .column.mobile-hidden,
            .values-column.mobile-hidden {
                display: none !important;
            }

            .column.mobile-active,
            .values-column.mobile-active {
                flex: 1 !important;
                width: 100% !important;
                display: flex !important;
                flex-direction: column !important;
            }

            .column.mobile-side-button,
            .values-column.mobile-side-button {
                flex: 0 0 100px !important;
                width: 100px !important;
                min-width: 100px !important;
                padding: 10px 5px !important;
                cursor: pointer !important;
                display: flex !important;
                align-items: stretch !important;
                justify-content: center !important;
                background: rgba(255, 255, 255, 0.95) !important;
                border-radius: 10px !important;
                min-height: 100% !important;
            }

            .column.mobile-side-button .card,
            .values-column.mobile-side-button .value-card {
                display: none !important;
            }
            
            .column.mobile-side-button .drop-zone,
            .values-column.mobile-side-button .values-drop-zone {
                min-height: 100% !important;
                height: 100% !important;
                border: none !important;
                background: transparent !important;
                padding: 5px !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
            }

            .column.mobile-side-button.mobile-left .column-header,
            .values-column.mobile-side-button.mobile-left .values-column-header {
                writing-mode: vertical-rl !important;
                text-orientation: mixed !important;
                transform: rotate(180deg) !important;
                margin: 0 !important;
                white-space: nowrap !important;
                font-size: 16px !important;
                padding: 15px 8px !important;
                height: 100% !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
            }

            .column.mobile-side-button.mobile-right .column-header,
            .values-column.mobile-side-button.mobile-right .values-column-header {
                writing-mode: vertical-rl !important;
                text-orientation: mixed !important;
                margin: 0 !important;
                white-space: nowrap !important;
                font-size: 16px !important;
                padding: 15px 8px !important;
                height: 100% !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
            }

            .column.mobile-side-button:active,
            .values-column.mobile-side-button:active {
                opacity: 0.6 !important;
            }
        }
        
        @media (min-width: 769px) and (max-width: 1024px) {
            .columns-wrapper,
            .values-columns {
                grid-template-columns: 1fr;
            }
            
            .column,
            .values-column {
                min-height: auto;
            }
            
            .drop-zone,
            .values-drop-zone {
                min-height: 200px;
            }
            
            .comparison-cards {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üéØ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ª–∏—á–Ω—ã—Ö —Ü–µ–Ω–Ω–æ—Å—Ç–µ–π</h1>
            <p>–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ü–µ–Ω–Ω–æ—Å—Ç—è–º–∏ –ø–æ –º–µ—Ç–æ–¥—É ACT</p>
        </header>
        
        <!-- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è —à–∞–≥–∞ 1 -->
        <div class="instructions" id="instructions-sorting">
            <h2>–®–∞–≥ 1. –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∂–∏–∑–Ω–µ–Ω–Ω—ã—Ö –æ–±–ª–∞—Å—Ç–µ–π</h2>
            <p>–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –∫–æ–ª–æ–Ω–∫–∏. –û—Ü–µ–Ω–∏—Ç–µ –≤–∞–∂–Ω–æ—Å—Ç—å –∫–∞–∂–¥–æ–π –æ–±–ª–∞—Å—Ç–∏ –¥–ª—è –≤–∞—à–µ–π –∂–∏–∑–Ω–∏.</p>
        </div>
        
        <!-- –®–∞–≥ 1: –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –æ–±–ª–∞—Å—Ç–µ–π -->
        <div id="sorting-area">
            <div class="sorting-container">
                <div class="columns-wrapper">
                    <div class="column">
                        <div class="column-header header-high">–û—á–µ–Ω—å –≤–∞–∂–Ω–æ</div>
                        <div class="drop-zone" id="high-importance" data-category="high"></div>
                    </div>
                    <div class="column">
                        <div class="column-header header-medium">–°—Ä–µ–¥–Ω–µ</div>
                        <div class="drop-zone" id="medium-importance" data-category="medium"></div>
                    </div>
                    <div class="column">
                        <div class="column-header header-low">–ù–µ –≤–∞–∂–Ω–æ</div>
                        <div class="drop-zone" id="low-importance" data-category="low"></div>
                    </div>
                </div>
            </div>
            
            <div class="action-buttons">
                <button class="btn btn-secondary" onclick="resetCards()">üîÑ –°–±—Ä–æ—Å–∏—Ç—å</button>
                <button class="btn btn-primary" onclick="proceedToComparison()">‚û°Ô∏è –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
            </div>
        </div>
        
        <!-- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è —à–∞–≥–∞ 2 -->
        <div class="instructions" id="instructions-comparison" style="display: none;">
            <h2>–®–∞–≥ 2. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤–∞–∂–Ω—ã—Ö –æ–±–ª–∞—Å—Ç–µ–π</h2>
            <p>–í—ã–±–µ—Ä–∏—Ç–µ, <strong>–∫–∞–∫–∞—è –æ–±–ª–∞—Å—Ç—å –≤–∞–∂–Ω–µ–µ</strong>. –û—Ç–≤–µ—á–∞–π—Ç–µ –±—ã—Å—Ç—Ä–æ, —Å–ª–µ–¥—É—è –ø–µ—Ä–≤–æ–π –∏–Ω—Ç—É–∏—Ü–∏–∏.</p>
        </div>
        
        <!-- –®–∞–≥ 2: –°—Ä–∞–≤–Ω–µ–Ω–∏–µ -->
        <div class="comparison-container" id="comparison-area">
            <div class="comparison-header">
                <h2>ü§î –ß—Ç–æ –≤–∞–∂–Ω–µ–µ?</h2>
            </div>
            <div class="comparison-progress" id="comparison-progress"></div>
            <div class="comparison-question">–í—ã–±–µ—Ä–∏—Ç–µ –±–æ–ª–µ–µ –≤–∞–∂–Ω—É—é –æ–±–ª–∞—Å—Ç—å</div>
            <div class="comparison-cards" id="comparison-cards"></div>
        </div>
        
        <!-- –°–≤–æ–¥–∫–∞ –ø–æ –≥—Ä—É–ø–ø–∞–º -->
        <div class="summary" id="summary-groups">
            <h2>üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏</h2>
            <div id="summary-groups-content"></div>
            <div class="action-buttons">
                <button class="btn btn-secondary" onclick="backToSortingFromSummary()">‚¨ÖÔ∏è –ù–∞–∑–∞–¥</button>
                <button class="btn btn-primary" onclick="goToValuesSort()">‚û°Ô∏è –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
            </div>
        </div>
        
        <!-- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è —à–∞–≥–∞ 4 -->
        <div class="instructions" id="instructions-values" style="display: none;">
            <h2>–®–∞–≥ 4. –£—Ç–æ—á–Ω–µ–Ω–∏–µ —Ü–µ–Ω–Ω–æ—Å—Ç–µ–π –≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏</h2>
            <p id="selected-group-title"></p>
            <p>–†–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç–µ —Ü–µ–Ω–Ω–æ—Å—Ç–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º. –ú–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é —Ü–µ–Ω–Ω–æ—Å—Ç—å, –Ω–∞–∂–∞–≤ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É "–î—Ä—É–≥–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å".</p>
        </div>
        
        <!-- –®–∞–≥ 4: –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Ü–µ–Ω–Ω–æ—Å—Ç–µ–π -->
        <div class="values-container" id="values-sorting-area">
            <div class="values-columns">
                <div class="values-column">
                    <div class="values-column-header" style="background-color: #22c55e;">–û—á–µ–Ω—å –≤–∞–∂–Ω–æ</div>
                    <div class="values-drop-zone" id="values-high" data-category="high"></div>
                </div>
                <div class="values-column">
                    <div class="values-column-header" style="background-color: #f59e0b;">–°—Ä–µ–¥–Ω–µ</div>
                    <div class="values-drop-zone" id="values-medium" data-category="medium"></div>
                </div>
                <div class="values-column">
                    <div class="values-column-header" style="background-color: #ef4444;">–ù–µ –≤–∞–∂–Ω–æ</div>
                    <div class="values-drop-zone" id="values-low" data-category="low"></div>
                </div>
            </div>
            
            <div class="action-buttons">
                <button class="btn btn-secondary" onclick="resetValuesCards()">üîÑ –°–±—Ä–æ—Å–∏—Ç—å</button>
                <button class="btn btn-primary" onclick="proceedFromValuesSort()">‚û°Ô∏è –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
            </div>
        </div>
        
        <!-- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è —à–∞–≥–∞ 5 -->
        <div class="instructions" id="instructions-refined" style="display: none;">
            <h2 id="refined-title-heading">–®–∞–≥ 5. –£—Ç–æ—á–Ω–µ–Ω–∏–µ</h2>
            <p id="refined-intro-text"></p>
            <p>–†–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –∏—Ö –ø–æ —Ç—Ä—ë–º –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º.</p>
        </div>
        
        <!-- –®–∞–≥ 5: –£—Ç–æ—á–Ω–µ–Ω–Ω–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ -->
        <div class="refined-sorting-container" id="refined-sorting-area">
            <div class="values-columns">
                <div class="values-column">
                    <div class="values-column-header header-highest">–°–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ</div>
                    <div class="values-drop-zone" id="refined-highest" data-category="highest"></div>
                </div>
                <div class="values-column">
                    <div class="values-column-header header-high">–û—á–µ–Ω—å –≤–∞–∂–Ω–æ</div>
                    <div class="values-drop-zone" id="refined-medium" data-category="medium"></div>
                </div>
                <div class="values-column">
                    <div class="values-column-header header-medium">–°—Ä–µ–¥–Ω–µ</div>
                    <div class="values-drop-zone" id="refined-low" data-category="low"></div>
                </div>
            </div>
            
            <div class="action-buttons">
                <button class="btn btn-secondary" onclick="resetRefinedCards()">üîÑ –°–±—Ä–æ—Å–∏—Ç—å</button>
                <button class="btn btn-primary" onclick="proceedFromRefinedSort()">‚û°Ô∏è –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
            </div>
        </div>
        
        <!-- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è —à–∞–≥–∞ 6 -->
        <div class="instructions" id="instructions-values-comparison" style="display: none;">
            <h2>–®–∞–≥ 6. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ü–µ–Ω–Ω–æ—Å—Ç–µ–π</h2>
            <p>–í—ã–±–µ—Ä–∏—Ç–µ, <strong>–∫–∞–∫–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å –≤–∞–∂–Ω–µ–µ</strong>. –°–ª—É—à–∞–π—Ç–µ —Å–≤–æ—é –∏–Ω—Ç—É–∏—Ü–∏—é.</p>
        </div>
        
        <!-- –®–∞–≥ 6: –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ü–µ–Ω–Ω–æ—Å—Ç–µ–π -->
        <div class="comparison-container" id="values-comparison-area">
            <div class="comparison-header">
                <h2>ü§î –ß—Ç–æ –≤–∞–∂–Ω–µ–µ?</h2>
            </div>
            <div class="comparison-progress" id="values-comparison-progress"></div>
            <div class="comparison-question">–í—ã–±–µ—Ä–∏—Ç–µ –±–æ–ª–µ–µ –≤–∞–∂–Ω—É—é —Ü–µ–Ω–Ω–æ—Å—Ç—å</div>
            <div class="comparison-cards" id="values-comparison-cards"></div>
        </div>
        
        <!-- –§–∏–Ω–∞–ª—å–Ω–∞—è —Å–≤–æ–¥–∫–∞ -->
        <div class="final-values-summary" id="final-values-summary">
            <h2>üéØ –í–∞—à–∏ –∫–ª—é—á–µ–≤—ã–µ —Ü–µ–Ω–Ω–æ—Å—Ç–∏</h2>
            <div id="final-values-summary-content"></div>
            
            <div class="committed-action-section">
                <h3>üìù Committed Action</h3>
                <p><strong>1.</strong> –ü–æ–¥—É–º–∞–π—Ç–µ –æ —Å—Ñ–µ—Ä–µ <strong id="domain-name"></strong> –∏ —Ü–µ–Ω–Ω–æ—Å—Ç–∏ <strong id="top-value-name"></strong>, –∫–æ—Ç–æ—Ä–∞—è –æ–∫–∞–∑–∞–ª–∞—Å—å –¥–ª—è –≤–∞—Å –Ω–∞–∏–±–æ–ª–µ–µ –≤–∞–∂–Ω–æ–π. –ó–∞ 10‚Äì30 –º–∏–Ω—É—Ç –æ–ø–∏—à–∏—Ç–µ, —á—Ç–æ –∑–Ω–∞—á–∏—Ç –¥–ª—è –≤–∞—Å –∂–∏—Ç—å –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å —ç—Ç–æ–π —Ü–µ–Ω–Ω–æ—Å—Ç—å—é?</p>
                <p><strong>2.</strong> –ß—Ç–æ –≤—ã –º–æ–∂–µ—Ç–µ —Å–¥–µ–ª–∞—Ç—å —É–∂–µ –Ω–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ, —á—Ç–æ–±—ã –ø—Ä–∏–±–ª–∏–∑–∏—Ç—å—Å—è –∫ —ç—Ç–æ–π —Ü–µ–Ω–Ω–æ—Å—Ç–∏, —Å–¥–µ–ª–∞—Ç—å —Ö–æ—Ç—è –±—ã –Ω–µ–±–æ–ª—å—à–æ–π —à–∞–≥?</p>
                <p><strong>3.</strong> –ö–∞–∫–∏–µ –±–∞—Ä—å–µ—Ä—ã, –º—ã—Å–ª–∏, —ç–º–æ—Ü–∏–∏ –º–æ–≥—É—Ç –ø–æ–º–µ—à–∞—Ç—å –≤–∞–º?</p>
            </div>
            
            <div class="action-buttons">
                <button class="btn btn-secondary" onclick="backFromFinalSummary()">‚¨ÖÔ∏è –ù–∞–∑–∞–¥</button>
                <button class="btn btn-primary" onclick="saveFinalValuesResults()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</button>
            </div>
        </div>
        
        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ü–µ–Ω–Ω–æ—Å—Ç–∏ -->
        <div class="modal-overlay" id="editValueModal">
            <div class="modal-content">
                <div class="modal-header">–í–Ω–µ—Å–∏—Ç–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é —Ü–µ–Ω–Ω–æ—Å—Ç—å - <span id="modal-domain-name"></span></div>
                <div class="modal-input-group">
                    <label class="modal-label" for="customValueTitle">–ù–∞–∑–≤–∞–Ω–∏–µ —Ü–µ–Ω–Ω–æ—Å—Ç–∏</label>
                    <input type="text" id="customValueTitle" class="modal-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ" maxlength="50">
                </div>
                <div class="modal-input-group">
                    <label class="modal-label" for="customValueDesc">–û–ø–∏—Å–∞–Ω–∏–µ —Ü–µ–Ω–Ω–æ—Å—Ç–∏</label>
                    <textarea id="customValueDesc" class="modal-textarea" placeholder="–í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ"></textarea>
                </div>
                <div class="modal-hint">
                    üí° –ù–∞–∂–º–∏—Ç–µ Enter –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–∞—Ä—Ç–æ—á–∫–∏
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Service Worker –¥–ª—è PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('./service-worker.js')
                    .then(function(registration) {
                        console.log('Service Worker –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω:', registration.scope);
                    })
                    .catch(function(err) {
                        console.error('Service Worker –æ—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:', err);
                    });
            });
        }
        
const groupsData = [
            { id: 1, title: "–°–µ–º–µ–π–Ω—ã–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è", questions: "–ö–∞–∫–∏—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏–π —Å–æ —Å–≤–æ–µ–π —Å–µ–º—å–µ–π –≤—ã —Ö–æ—Ç–∏—Ç–µ? –ö–∞–∫–∏–º –±—Ä–∞—Ç–æ–º/—Å–µ—Å—Ç—Ä–æ–π/—Å—ã–Ω–æ–º/–¥–æ—á–µ—Ä—å—é/–¥—è–¥–µ–π/–≤–Ω—É–∫–æ–º –≤—ã —Ö–æ—Ç–∏—Ç–µ –±—ã—Ç—å?" },
            { id: 2, title: "–§–∏–∑–∏—á–µ—Å–∫–æ–µ –±–ª–∞–≥–æ–ø–æ–ª—É—á–∏–µ", questions: "–ì–æ–≤–æ—Ä—è –æ –≤–∞—à–µ–º –∑–¥–æ—Ä–æ–≤—å–µ, —á—Ç–æ –Ω–∞–∏–±–æ–ª–µ–µ –≤–∞–∂–Ω–æ –¥–ª—è –≤–∞—Å –≤ —ç—Ç–æ–π –æ–±–ª–∞—Å—Ç–∏? –ö–∞–∫ –≤—ã —Ö–æ—Ç–∏—Ç–µ –≤—ã–≥–ª—è–¥–µ—Ç—å –∏ —á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å —Å–µ–±—è?" },
            { id: 3, title: "–ë—Ä–∞–∫ / –ø–∞—Ä–∞ / –∏–Ω—Ç–∏–º–Ω—ã–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è", questions: "–ö–∞–∫–∏–º –º—É–∂–µ–º/–∂–µ–Ω–æ–π/–ø–∞—Ä—Ç–Ω–µ—Ä–æ–º –≤—ã —Ö–æ—Ç–∏—Ç–µ –±—ã—Ç—å? –ß–∞—Å—Ç—å—é –∫–∞–∫–∏—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏–π –≤—ã —Ö–æ—Ç–∏—Ç–µ –±—ã—Ç—å?" },
            { id: 4, title: "–ì—Ä–∞–∂–¥–∞–Ω–∏–Ω / –æ–±—â–µ—Å—Ç–≤–æ", questions: "–ß–∞—Å—Ç—å—é –∫–∞–∫–æ–π —Å—Ä–µ–¥—ã –≤—ã —Ö–æ—Ç–∏—Ç–µ –±—ã—Ç—å? –ö–∞–∫–æ–π –≤–∫–ª–∞–¥ –≤—ã —Ö–æ—Ç–∏—Ç–µ –≤–Ω–µ—Å—Ç–∏ –≤ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ?" },
            { id: 5, title: "–î—É—Ö–æ–≤–Ω—ã–µ —Ü–µ–Ω–Ω–æ—Å—Ç–∏", questions: "–ö–∞–∫–∏—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏–π –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å –ë–æ–≥–æ–º, –ü—Ä–∏—Ä–æ–¥–æ–π, –ó–µ–º–ª–µ–π?" },
            { id: 6, title: "–û—Ç–¥—ã—Ö", questions: "–ß—Ç–æ –ø—Ä–∏–Ω–æ—Å–∏—Ç –≤–∞–º —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ? –ß—Ç–æ –≤–∞—Å —Ä–∞—Å—Å–ª–∞–±–ª—è–µ—Ç? –ö–æ–≥–¥–∞ –≤—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –≤ –Ω–∞–∏–±–æ–ª–µ–µ –∏–≥—Ä–∏–≤–æ–º –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–∏?" },
            { id: 7, title: "–†–æ–¥–∏—Ç–µ–ª—å—Å—Ç–≤–æ", questions: "–ö–∞–∫–∏–º —Ä–æ–¥–∏—Ç–µ–ª–µ–º –≤—ã —Ö–æ—Ç–∏—Ç–µ –±—ã—Ç—å? –ö–∞–∫–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ –≤—ã —Ö–æ—Ç–∏—Ç–µ, —á—Ç–æ–±—ã –∑–∞–º–µ—á–∞–ª –≤–∞—à —Ä–µ–±–µ–Ω–æ–∫?" },
            { id: 8, title: "–î—Ä—É–∂–±–∞ / —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è", questions: "–ö–∞–∫–∏–º –¥—Ä—É–≥–æ–º –≤—ã —Ö–æ—Ç–∏—Ç–µ –±—ã—Ç—å? –ö–∞–∫–∏–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è –≤–∞–º –≤–∞–∂–Ω–æ —Ä–∞–∑–≤–∏–≤–∞—Ç—å? –ö–∞–∫ –≤—ã —Ö–æ—Ç–∏—Ç–µ –æ–±—Ä–∞—â–∞—Ç—å—Å—è —Å –¥—Ä—É–∑—å—è–º–∏?" },
            { id: 9, title: "–ó–∞–Ω—è—Ç–æ—Å—Ç—å", questions: "–ö–∞–∫–∞—è —Ä–∞–±–æ—Ç–∞ —Ü–µ–Ω–Ω–∞ –¥–ª—è –≤–∞—Å? –ö–∞–∫–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø—Ä–∏–≤–Ω–µ—Å—Ç–∏ –∫–∞–∫ —Ä–∞–±–æ—Ç–Ω–∏–∫? –ö–∞–∫–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞ —Ä–∞–±–æ—á–∏–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø–æ—Å—Ç—Ä–æ–∏—Ç—å?" },
            { id: 10, title: "–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ / –ª–∏—á–Ω–æ—Å—Ç–Ω–æ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ", questions: "–ö–∞–∫–∏–µ –∑–æ–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è –≤–∞–º –≤–∞–∂–Ω—ã? –ö–∞–∫–∏–µ –Ω–∞–≤—ã–∫–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Ä–∞–∑–≤–∏—Ç—å? –û —á–µ–º –≤—ã —Ö–æ—Ç–∏—Ç–µ –±–æ–ª—å—à–µ –∑–Ω–∞—Ç—å?" }
        ];    
       const values40 = [
            { id: 1, title: "–ü—Ä–∏–Ω—è—Ç–∏–µ", desc: "–û—Ç–∫—Ä—ã—Ç–æ—Å—Ç—å –∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Å–µ–±—è, –¥—Ä—É–≥–∏—Ö, –∂–∏–∑–Ω—å –∏ —Å–≤–æ–∏ —á—É–≤—Å—Ç–≤–∞ —Ç–∞–∫–∏–º–∏, –∫–∞–∫–∏–µ –æ–Ω–∏ –µ—Å—Ç—å." },
            { id: 2, title: "–ê–≤–∞–Ω—Ç—é—Ä–Ω–æ—Å—Ç—å", desc: "–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏ –∏—Å–∫–∞—Ç—å –Ω–æ–≤—ã–µ, —Ä–∏—Å–∫–æ–≤–∞–Ω–Ω—ã–µ –∏–ª–∏ –∑–∞—Ö–≤–∞—Ç—ã–≤–∞—é—â–∏–µ –ø–µ—Ä–µ–∂–∏–≤–∞–Ω–∏—è." },
            { id: 3, title: "–ù–∞–ø–æ—Ä–∏—Å—Ç–æ—Å—Ç—å", desc: "–°–ø–æ–∫–æ–π–Ω–æ, —á–µ—Å—Ç–Ω–æ –∏ —É–≤–∞–∂–∏—Ç–µ–ª—å–Ω–æ –æ—Ç—Å—Ç–∞–∏–≤–∞—Ç—å —Å–≤–æ–∏ –ø—Ä–∞–≤–∞ –∏ –ø—Ä–æ—Å–∏—Ç—å –æ —Ç–æ–º, —á—Ç–æ –≤–∞–º –Ω—É–∂–Ω–æ." },
            { id: 4, title: "–ê—É—Ç–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—å", desc: "–ë—ã—Ç—å –Ω–∞—Å—Ç–æ—è—â–∏–º, –ø–æ–¥–ª–∏–Ω–Ω—ã–º –∏ –≤–µ—Ä–Ω—ã–º —Å–µ–±–µ." },
            { id: 5, title: "–ó–∞–±–æ—Ç–∞", desc: "–ê–∫—Ç–∏–≤–Ω–æ –∑–∞–±–æ—Ç–∏—Ç—å—Å—è –æ —Å–µ–±–µ, –¥—Ä—É–≥–∏—Ö –ª—é–¥—è—Ö –∏ –æ–± –æ–∫—Ä—É–∂–∞—é—â–µ–π —Å—Ä–µ–¥–µ." },
            { id: 6, title: "–°–æ—Å—Ç—Ä–∞–¥–∞–Ω–∏–µ", desc: "–î–æ–±—Ä–æ–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ –æ—Ç–∫–ª–∏–∫–∞—Ç—å—Å—è –Ω–∞ –±–æ–ª—å –∏ —Å—Ç—Ä–∞–¥–∞–Ω–∏–µ - —Å–≤–æ—ë –∏–ª–∏ –¥—Ä—É–≥–∏—Ö." },
            { id: 7, title: "–°–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ", desc: "–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –ø–æ–º–æ–≥–∞—Ç—å –∏ —Ä–∞–±–æ—Ç–∞—Ç—å –≤–º–µ—Å—Ç–µ —Å –¥—Ä—É–≥–∏–º–∏." },
            { id: 8, title: "–°–º–µ–ª–æ—Å—Ç—å", desc: "–ë—ã—Ç—å —Ö—Ä–∞–±—Ä—ã–º, –æ—Ç–≤–∞–∂–Ω—ã–º; –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –ø–µ—Ä–µ–¥ –ª–∏—Ü–æ–º —Å—Ç—Ä–∞—Ö–∞, —É–≥—Ä–æ–∑—ã –∏–ª–∏ —Ä–∏—Å–∫–∞." },
            { id: 9, title: "–ö—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å", desc: "–ë—ã—Ç—å —Ç–≤–æ—Ä—á–µ—Å–∫–∏–º, –∏–∑–æ–±—Ä–µ—Ç–∞—Ç–µ–ª—å–Ω—ã–º, –æ—Ç–∫—Ä—ã—Ç—ã–º –∫ –Ω–æ–≤—ã–º –∏–¥–µ—è–º –∏ —Ä–µ—à–µ–Ω–∏—è–º." },
            { id: 10, title: "–õ—é–±–æ–∑–Ω–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å", desc: "–ë—ã—Ç—å –æ—Ç–∫—Ä—ã—Ç—ã–º –∏ –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–Ω–Ω—ã–º; –≥–æ—Ç–æ–≤—ã–º –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –∏ –æ—Ç–∫—Ä—ã–≤–∞—Ç—å –Ω–æ–≤–æ–µ." },
            { id: 11, title: "–ü–æ–¥–¥–µ—Ä–∂–∫–∞", desc: "–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å, –≤–¥–æ—Ö–Ω–æ–≤–ª—è—Ç—å –∏ –ø–æ–æ—â—Ä—è—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –≤—ã –æ–¥–æ–±—Ä—è–µ—Ç–µ." },
            { id: 12, title: "–í—ã—Ä–∞–∑–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å", desc: "–ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Å–≤–æ–∏ –º—ã—Å–ª–∏ –∏ —á—É–≤—Å—Ç–≤–∞ —á–µ—Ä–µ–∑ —Å–ª–æ–≤–∞ –∏ –¥–µ–π—Å—Ç–≤–∏—è." },
            { id: 13, title: "–°–æ—Å—Ä–µ–¥–æ—Ç–æ—á–µ–Ω–Ω–æ—Å—Ç—å", desc: "–ë—ã—Ç—å –≤–æ–≤–ª–µ—á—ë–Ω–Ω—ã–º –∏ —Å–∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –Ω–∞ —Ç–æ–º, —á—Ç–æ –≤—ã –¥–µ–ª–∞–µ—Ç–µ." },
            { id: 14, title: "–°–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å", desc: "–î–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ –∏ —á–µ—Å—Ç–Ω–æ –ø–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—é –∫ —Å–µ–±–µ –∏ –¥—Ä—É–≥–∏–º." },
            { id: 15, title: "–ì–∏–±–∫–æ—Å—Ç—å", desc: "–ë—ã—Ç—å –≥–æ—Ç–æ–≤—ã–º –∏ —Å–ø–æ—Å–æ–±–Ω—ã–º –ø–æ–¥—Å—Ç—Ä–∞–∏–≤–∞—Ç—å—Å—è –ø–æ–¥ –º–µ–Ω—è—é—â–∏–µ—Å—è –æ–±—Å—Ç–æ—è—Ç–µ–ª—å—Å—Ç–≤–∞." },
            { id: 16, title: "–î—Ä—É–∂–µ–ª—é–±–∏–µ", desc: "–ë—ã—Ç—å —Ç—ë–ø–ª—ã–º, –æ—Ç–∫—Ä—ã—Ç—ã–º, –¥–æ–±—Ä–æ–∂–µ–ª–∞—Ç–µ–ª—å–Ω—ã–º –∏ –ø—Ä–∏–≤–µ—Ç–ª–∏–≤—ã–º –ø–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—é –∫ –¥—Ä—É–≥–∏–º." },
            { id: 17, title: "–ü—Ä–æ—â–µ–Ω–∏–µ", desc: "–û—Ç–ø—É—Å–∫–∞—Ç—å –æ–±–∏–¥—ã –∏ –ø—Ä–µ—Ç–µ–Ω–∑–∏–∏ –∫ —Å–µ–±–µ –∏–ª–∏ –¥—Ä—É–≥–∏–º." },
            { id: 18, title: "–ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å", desc: "–ó–∞–º–µ—á–∞—Ç—å –∏ —Ü–µ–Ω–∏—Ç—å —Ç–æ, —á—Ç–æ –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ –∏ –∏–º–µ–µ—Ç–µ." },
            { id: 19, title: "–ü–æ–ª–µ–∑–Ω–æ—Å—Ç—å", desc: "–ü–æ–º–æ–≥–∞—Ç—å, –¥–µ–ª–∏—Ç—å—Å—è, –≤–Ω–æ—Å–∏—Ç—å –≤–∫–ª–∞–¥, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –¥—Ä—É–≥–∏—Ö." },
            { id: 20, title: "–ß–µ—Å—Ç–Ω–æ—Å—Ç—å", desc: "–ë—ã—Ç—å —á–µ—Å—Ç–Ω—ã–º, –ø—Ä–∞–≤–¥–∏–≤—ã–º –∏ –∏—Å–∫—Ä–µ–Ω–Ω–∏–º - —Å —Å–æ–±–æ–π –∏ —Å –¥—Ä—É–≥–∏–º–∏." },
            { id: 21, title: "–ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å", desc: "–°–∞–º–æ–º—É –≤—ã–±–∏—Ä–∞—Ç—å, –∫–∞–∫ –∂–∏—Ç—å –∏ —á—Ç–æ –¥–µ–ª–∞—Ç—å." },
            { id: 22, title: "–£—Å–µ—Ä–¥–∏–µ", desc: "–ë—ã—Ç—å —Ç—Ä—É–¥–æ–ª—é–±–∏–≤—ã–º, —É—Å–µ—Ä–¥–Ω—ã–º, –ø—Ä–µ–¥–∞–Ω–Ω—ã–º –¥–µ–ª—É." },
            { id: 23, title: "–î–æ–±—Ä–æ—Ç–∞", desc: "–ë—ã—Ç—å –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω—ã–º, –∑–∞–±–æ—Ç–ª–∏–≤—ã–º –∏ –ø–æ–º–æ–≥–∞—é—â–∏–º - –∫ —Å–µ–±–µ –∏ –∫ –¥—Ä—É–≥–∏–º." },
            { id: 24, title: "–õ—é–±–æ–≤—å", desc: "–ü—Ä–æ—è–≤–ª—è—Ç—å –ª—é–±–æ–≤—å, –Ω–µ–∂–Ω–æ—Å—Ç—å –∏ –≥–ª—É–±–æ–∫—É—é –∑–∞–±–æ—Ç—É - –∫ —Å–µ–±–µ –∏ –∫ –¥—Ä—É–≥–∏–º." },
            { id: 25, title: "–û—Å–æ–∑–Ω–∞–Ω–Ω–æ—Å—Ç—å", desc: "–ë—ã—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—â–∏–º –∏ –≤–∫–ª—é—á—ë–Ω–Ω—ã–º –≤ —Ç–æ, —á—Ç–æ –≤—ã –¥–µ–ª–∞–µ—Ç–µ." },
            { id: 26, title: "–û—Ç–∫—Ä—ã—Ç–æ—Å—Ç—å", desc: "–î–µ–ª–∏—Ç—å—Å—è —Å–æ–±–æ–π, —Ä–∞—Å–∫—Ä—ã–≤–∞—Ç—å —Å–≤–æ–∏ –º—ã—Å–ª–∏ –∏ —á—É–≤—Å—Ç–≤–∞ –ø–µ—Ä–µ–¥ –¥—Ä—É–≥–∏–º–∏." },
            { id: 27, title: "–£–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω–æ—Å—Ç—å", desc: "–ë—ã—Ç—å –∞–∫–∫—É—Ä–∞—Ç–Ω—ã–º, –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–Ω—ã–º, —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –∏ –¥–µ–ª–∞." },
            { id: 28, title: "–ù–∞—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å", desc: "–ü—Ä–æ–¥–æ–ª–∂–∞—Ç—å –∏–¥—Ç–∏ –∫ –≤–∞–∂–Ω–æ–º—É, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ç—Ä—É–¥–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è." },
            { id: 29, title: "–ò–≥—Ä–∏–≤–æ—Å—Ç—å", desc: "–ë—ã—Ç—å —Å —á—É–≤—Å—Ç–≤–æ–º —é–º–æ—Ä–∞, –ª—ë–≥–∫–∏–º, –ª—é–±—è—â–∏–º –∏–≥—Ä—É –∏ –≤–µ—Å–µ–ª—å–µ." },
            { id: 30, title: "–ó–∞—â–∏—Ç–∞", desc: "–ó–∞–±–æ—Ç–∏—Ç—å—Å—è –æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –∑–∞—â–∏—â—ë–Ω–Ω–æ—Å—Ç–∏ —Å–µ–±—è –∏ –¥—Ä—É–≥–∏—Ö." },
            { id: 31, title: "–£–≤–∞–∂–µ–Ω–∏–µ", desc: "–û—Ç–Ω–æ—Å–∏—Ç—å—Å—è –∫ —Å–µ–±–µ –∏ –¥—Ä—É–≥–∏–º —Å –¥–æ—Å—Ç–æ–∏–Ω—Å—Ç–≤–æ–º, –≤–Ω–∏–º–∞–Ω–∏–µ–º –∏ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é." },
            { id: 32, title: "–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å", desc: "–ë—ã—Ç—å –Ω–∞–¥—ë–∂–Ω—ã–º, –≤—ã–ø–æ–ª–Ω—è—Ç—å –æ–±–µ—â–∞–Ω–∏—è –∏ –æ—Ç–≤–µ—á–∞—Ç—å –∑–∞ —Å–≤–æ–∏ –¥–µ–π—Å—Ç–≤–∏—è." },
            { id: 33, title: "–ö–æ–º–ø–µ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å", desc: "–î–µ–ª–∞—Ç—å –¥–µ–ª–∞ —Ö–æ—Ä–æ—à–æ, –∏—Å–ø–æ–ª—å–∑—É—è –∑–Ω–∞–Ω–∏—è, –æ–ø—ã—Ç –∏ –æ–±—É—á–µ–Ω–∏–µ." },
            { id: 34, title: "–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥—Ä—É–≥–∏—Ö", desc: "–ë—ã—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–º, –æ–±–æ–¥—Ä—è—é—â–∏–º –∏ –ø–æ–º–æ–≥–∞—é—â–∏–º - —Å–µ–±–µ –∏ –¥—Ä—É–≥–∏–º." },
            { id: 35, title: "–ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å", desc: "–ë—ã—Ç—å –≤–µ—Ä–Ω—ã–º, —á–µ—Å—Ç–Ω—ã–º, –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–º –∏ –∑–∞—Å–ª—É–∂–∏–≤–∞—é—â–∏–º –¥–æ–≤–µ—Ä–∏—è." },
            { id: 36, title: "–î–æ–≤–µ—Ä–∏–µ", desc: "–ë—ã—Ç—å –≥–æ—Ç–æ–≤—ã–º –≤–µ—Ä–∏—Ç—å –≤ —á–µ—Å—Ç–Ω–æ—Å—Ç—å, –∏—Å–∫—Ä–µ–Ω–Ω–æ—Å—Ç—å –∏ –∫–æ–º–ø–µ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –¥—Ä—É–≥–æ–≥–æ." },
            { id: 37, title: "–î—Ä—É–≥–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å", desc: "–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π —Ü–µ–Ω–Ω–æ—Å—Ç–∏" }
        ];
        
        let draggedElement = null;
        let highImportanceGroups = [];
        let comparisons = [];
        let currentComparisonIndex = 0;
        let comparisonResults = {};
        let rankedHighGroups = [];
        let topGroup = null;
        let needsRefinedSort = false;
        let topValuesForComparison = [];
        let valuesComparisons = [];
        let currentValuesComparisonIndex = 0;
        let valuesComparisonResults = {};
        let rankedTopValues = [];
        
        function initializeGroupCards() {
            const highZone = document.getElementById('high-importance');
            const mediumZone = document.getElementById('medium-importance');
            const lowZone = document.getElementById('low-importance');
            
            if (!highZone || !mediumZone || !lowZone) return;
            
            highZone.innerHTML = '';
            mediumZone.innerHTML = '';
            lowZone.innerHTML = '';
            
            groupsData.forEach((value, index) => {
                const card = createGroupCard(value);
                if (index % 3 === 0) {
                    highZone.appendChild(card);
                } else if (index % 3 === 1) {
                    mediumZone.appendChild(card);
                } else {
                    lowZone.appendChild(card);
                }
            });
        }
        
        
        // –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π Drag-and-Drop —Å Pointer Events (—Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö)
        function addTouchDrag(card) {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã –ª–∏ —É–∂–µ —Å–æ–±—ã—Ç–∏—è
            if (card.dataset.touchDragEnabled === 'true') {
                return;
            }
            card.dataset.touchDragEnabled = 'true';
            
            let clone = null;
            let startX, startY, offsetX, offsetY;
            let isDragging = false;
            let switchTimeout = null;
            
            card.addEventListener('pointerdown', function(e) {
                const rect = card.getBoundingClientRect();
                startX = e.clientX;
                startY = e.clientY;
                offsetX = e.clientX - rect.left;
                offsetY = e.clientY - rect.top;
                isDragging = false;
                card.setPointerCapture(e.pointerId);
            });
            
            card.addEventListener('pointermove', function(e) {
                const deltaX = Math.abs(e.clientX - startX);
                const deltaY = Math.abs(e.clientY - startY);
                
                if (!isDragging && (deltaX > 10 || deltaY > 10)) {
                    isDragging = true;
                    const rect = card.getBoundingClientRect();
                    clone = card.cloneNode(true);
                    clone.style.position = 'fixed';
                    clone.style.zIndex = '10000';
                    clone.style.width = rect.width + 'px';
                    clone.style.opacity = '0.7';
                    clone.style.pointerEvents = 'none';
                    clone.style.transform = 'scale(1.05)';
                    clone.style.boxShadow = '0 10px 30px rgba(0,0,0,0.3)';
                    document.body.appendChild(clone);
                    card.style.opacity = '0.3';
                }
                
                if (!clone || !isDragging) return;
                
                clone.style.left = (e.clientX - offsetX) + 'px';
                clone.style.top = (e.clientY - offsetY) + 'px';
                
                clone.style.display = 'none';
                const elementBelow = document.elementFromPoint(e.clientX, e.clientY);
                clone.style.display = 'block';
                
                document.querySelectorAll('.drop-zone, .values-drop-zone').forEach(z => z.classList.remove('drag-over'));
                document.querySelectorAll('.mobile-side-button').forEach(btn => {
                    btn.style.background = '';
                    btn.style.transform = '';
                });
                
                if (elementBelow) {
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –Ω–∞ –±–æ–∫–æ–≤–æ–π –ª–∏ –∫–Ω–æ–ø–∫–µ
                    let sideButton = elementBelow;
                    while (sideButton && !sideButton.classList.contains('mobile-side-button') && sideButton !== document.body) {
                        sideButton = sideButton.parentElement;
                    }
                    
                    if (sideButton && sideButton.classList.contains('mobile-side-button')) {
                        // –ù–∞–≤–µ–¥–µ–Ω—ã –Ω–∞ –±–æ–∫–æ–≤—É—é –∫–Ω–æ–ø–∫—É - –ø–æ–¥—Å–≤–µ—á–∏–≤–∞–µ–º
                        sideButton.style.background = 'rgba(102, 126, 234, 0.3)';
                        sideButton.style.transform = 'scale(1.05)';
                        
                        // –ù–∞—Ö–æ–¥–∏–º drop-zone –≤–Ω—É—Ç—Ä–∏ –±–æ–∫–æ–≤–æ–π –∫–Ω–æ–ø–∫–∏ –∏ –ø–æ–¥—Å–≤–µ—á–∏–≤–∞–µ–º
                        const dropZoneInside = sideButton.querySelector('.drop-zone, .values-drop-zone');
                        if (dropZoneInside) {
                            dropZoneInside.classList.add('drag-over');
                        }
                        
                        if (!switchTimeout) {
                            switchTimeout = setTimeout(() => {
                                // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º –∫–æ–ª–æ–Ω–∫—É
                                const container = sideButton.closest('.columns-wrapper, .values-columns');
                                if (container) {
                                    const columns = Array.from(container.querySelectorAll('.column, .values-column'));
                                    const targetIndex = columns.indexOf(sideButton);
                                    
                                    if (targetIndex !== -1) {
                                        columns.forEach((col) => {
                                            col.classList.remove('mobile-hidden', 'mobile-active', 'mobile-side-button', 'mobile-left', 'mobile-right');
                                            col.style.background = '';
                                            col.style.transform = '';
                                        });
                                        
                                        columns[targetIndex].classList.add('mobile-active');
                                        
                                        if (targetIndex > 0) {
                                            columns[targetIndex - 1].classList.add('mobile-side-button', 'mobile-left');
                                        }
                                        
                                        if (targetIndex < columns.length - 1) {
                                            columns[targetIndex + 1].classList.add('mobile-side-button', 'mobile-right');
                                        }
                                        
                                        columns.forEach((col, idx) => {
                                            if (idx < targetIndex - 1 || idx > targetIndex + 1) {
                                                col.classList.add('mobile-hidden');
                                            }
                                        });
                                    }
                                }
                                switchTimeout = null;
                            }, 500); // 500ms –∑–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º
                        }
                    } else {
                        // –ù–µ –Ω–∞ –±–æ–∫–æ–≤–æ–π –∫–Ω–æ–ø–∫–µ - —Å–±—Ä–∞—Å—ã–≤–∞–µ–º —Ç–∞–π–º–µ—Ä
                        if (switchTimeout) {
                            clearTimeout(switchTimeout);
                            switchTimeout = null;
                        }
                        
                        // –ò—â–µ–º drop-zone
                        let dropZone = elementBelow;
                        while (dropZone && !dropZone.classList.contains('drop-zone') && !dropZone.classList.contains('values-drop-zone') && dropZone !== document.body) {
                            dropZone = dropZone.parentElement;
                        }
                        if (dropZone && (dropZone.classList.contains('drop-zone') || dropZone.classList.contains('values-drop-zone'))) {
                            dropZone.classList.add('drag-over');
                        }
                    }
                }
            });
            
            card.addEventListener('pointerup', function(e) {
                if (!clone || !isDragging) {
                    isDragging = false;
                    if (clone) {
                        try {
                            document.body.removeChild(clone);
                        } catch(err) {}
                        clone = null;
                    }
                    card.style.opacity = '1';
                    return;
                }
                
                // –û—á–∏—â–∞–µ–º —Ç–∞–π–º–µ—Ä
                if (switchTimeout) {
                    clearTimeout(switchTimeout);
                    switchTimeout = null;
                }
                
                // –£–±–∏—Ä–∞–µ–º –ø–æ–¥—Å–≤–µ—Ç–∫—É –±–æ–∫–æ–≤—ã—Ö –∫–Ω–æ–ø–æ–∫
                document.querySelectorAll('.mobile-side-button').forEach(btn => {
                    btn.style.background = '';
                    btn.style.transform = '';
                });
                
                clone.style.display = 'none';
                const elementBelow = document.elementFromPoint(e.clientX, e.clientY);
                clone.style.display = 'block';
                
                if (elementBelow) {
                    let dropZone = elementBelow;
                    while (dropZone && !dropZone.classList.contains('drop-zone') && !dropZone.classList.contains('values-drop-zone') && dropZone !== document.body) {
                        dropZone = dropZone.parentElement;
                    }
                    if (dropZone && (dropZone.classList.contains('drop-zone') || dropZone.classList.contains('values-drop-zone'))) {
                        dropZone.appendChild(card);
                    }
                }
                
                try {
                    document.body.removeChild(clone);
                } catch(err) {
                    console.error('Error removing clone:', err);
                }
                clone = null;
                card.style.opacity = '1';
                isDragging = false;
                document.querySelectorAll('.drop-zone, .values-drop-zone').forEach(z => z.classList.remove('drag-over'));
            });
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è —Å–ª—É—á–∞—è, –∫–æ–≥–¥–∞ pointer –æ—Ç–º–µ–Ω—è–µ—Ç—Å—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–µ)
            card.addEventListener('pointercancel', function(e) {
                if (clone) {
                    try {
                        document.body.removeChild(clone);
                    } catch(err) {}
                    clone = null;
                }
                card.style.opacity = '1';
                isDragging = false;
                if (switchTimeout) {
                    clearTimeout(switchTimeout);
                    switchTimeout = null;
                }
                document.querySelectorAll('.drop-zone, .values-drop-zone').forEach(z => z.classList.remove('drag-over'));
                document.querySelectorAll('.mobile-side-button').forEach(btn => {
                    btn.style.background = '';
                    btn.style.transform = '';
                });
            });
        }
        
        function createGroupCard(value) {
            const card = document.createElement('div');
            card.className = 'card';
            card.dataset.id = value.id;
            card.innerHTML = `<div class="card-title">${value.title}</div><div class="card-questions">${value.questions}</div>`;
            card.addEventListener('dragstart', handleDragStart);
            card.addEventListener('dragend', handleDragEnd);
            addTouchDrag(card); // –î–æ–±–∞–≤–ª—è–µ–º pointer support
            return card;
        }
        
        function handleDragStart(e) {
            draggedElement = this;
            this.classList.add('dragging');
            e.dataTransfer.effectAllowed = 'move';
            e.dataTransfer.setData('text/plain', '');
        }
        
        function handleDragEnd(e) {
            this.classList.remove('dragging');
            document.querySelectorAll('.drop-zone, .values-drop-zone').forEach(zone => {
                zone.classList.remove('drag-over');
            });
        }
        
        function setupDropZones() {
            const zones = document.querySelectorAll('.drop-zone, .values-drop-zone');
            zones.forEach(zone => {
                zone.addEventListener('dragover', function(e) {
                    e.preventDefault();
                    this.classList.add('drag-over');
                });
                
                zone.addEventListener('drop', function(e) {
                    e.preventDefault();
                    this.classList.remove('drag-over');
                    if (draggedElement) {
                        this.appendChild(draggedElement);
                    }
                });
                
                zone.addEventListener('dragleave', function(e) {
                    const rect = this.getBoundingClientRect();
                    if (e.clientX < rect.left || e.clientX >= rect.right ||
                        e.clientY < rect.top || e.clientY >= rect.bottom) {
                        this.classList.remove('drag-over');
                    }
                });
            });
        }
        
        function resetCards() {
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —Å–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ –∫–∞—Ä—Ç–æ—á–∫–∏?')) {
                initializeGroupCards();
            }
        }
        
        function proceedToComparison() {
            const highCards = Array.from(document.getElementById('high-importance').querySelectorAll('.card'));
            
            if (highCards.length === 0) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É –∫–∞—Ä—Ç–æ—á–∫—É –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏—é "–û—á–µ–Ω—å –≤–∞–∂–Ω–æ".');
                return;
            }
            
            highImportanceGroups = highCards.map(card => groupsData.find(v => v.id === parseInt(card.dataset.id)));
            
            if (highImportanceGroups.length === 1) {
                rankedHighGroups = [...highImportanceGroups];
                topGroup = rankedHighGroups[0];
                showGroupsSummary();
                return;
            }
            
            comparisons = [];
            for (let i = 0; i < highImportanceGroups.length; i++) {
                for (let j = i + 1; j < highImportanceGroups.length; j++) {
                    comparisons.push([highImportanceGroups[i], highImportanceGroups[j]]);
                }
            }
            
            comparisonResults = {};
            highImportanceGroups.forEach(value => {
                comparisonResults[value.id] = 0;
            });
            
            currentComparisonIndex = 0;
            
            document.getElementById('instructions-sorting').style.display = 'none';
            document.getElementById('sorting-area').style.display = 'none';
            document.getElementById('instructions-comparison').style.display = 'block';
            document.getElementById('comparison-area').style.display = 'block';
            
            showComparison();
        }
        
        function showComparison() {
            if (currentComparisonIndex >= comparisons.length) {
                rankedHighGroups = highImportanceGroups.sort((a, b) => comparisonResults[b.id] - comparisonResults[a.id]);
                topGroup = rankedHighGroups[0];
                showGroupsSummary();
                return;
            }
            
            const [valueA, valueB] = comparisons[currentComparisonIndex];
            
            document.getElementById('comparison-progress').textContent = `–í–æ–ø—Ä–æ—Å ${currentComparisonIndex + 1} –∏–∑ ${comparisons.length}`;
            
            const cardsContainer = document.getElementById('comparison-cards');
            cardsContainer.innerHTML = `
                <div class="comparison-card" onclick="selectGroupValue(${valueA.id})">
                    <div class="comparison-card-title">${valueA.title}</div>
                    <div class="comparison-card-questions">${valueA.questions}</div>
                </div>
                <div class="comparison-card" onclick="selectGroupValue(${valueB.id})">
                    <div class="comparison-card-title">${valueB.title}</div>
                    <div class="comparison-card-questions">${valueB.questions}</div>
                </div>
            `;
        }
        
        function selectGroupValue(selectedId) {
            comparisonResults[selectedId]++;
            currentComparisonIndex++;
            showComparison();
        }
        
        function showGroupsSummary() {
            const mediumCards = Array.from(document.getElementById('medium-importance').querySelectorAll('.card'));
            const lowCards = Array.from(document.getElementById('low-importance').querySelectorAll('.card'));
            
            let html = '';
            
            if (rankedHighGroups.length > 0) {
                html += `<div class="summary-section"><h3>–û—á–µ–Ω—å –≤–∞–∂–Ω–æ</h3><ul class="ranked-list">`;
                rankedHighGroups.forEach(value => {
                    html += `<li>${value.title}</li>`;
                });
                html += `</ul></div>`;
            }
            
            if (mediumCards.length > 0) {
                html += `<div class="summary-section"><h3>–°—Ä–µ–¥–Ω–µ</h3><ul>`;
                mediumCards.forEach(card => {
                    html += `<li>${card.querySelector('.card-title').textContent}</li>`;
                });
                html += `</ul></div>`;
            }
            
            if (lowCards.length > 0) {
                html += `<div class="summary-section"><h3>–ù–µ –≤–∞–∂–Ω–æ</h3><ul>`;
                lowCards.forEach(card => {
                    html += `<li>${card.querySelector('.card-title').textContent}</li>`;
                });
                html += `</ul></div>`;
            }
            
            document.getElementById('summary-groups-content').innerHTML = html;
            
            document.getElementById('instructions-comparison').style.display = 'none';
            document.getElementById('comparison-area').style.display = 'none';
            document.getElementById('summary-groups').style.display = 'block';
        }
        
        function backToSortingFromSummary() {
            document.getElementById('summary-groups').style.display = 'none';
            document.getElementById('instructions-sorting').style.display = 'block';
            document.getElementById('sorting-area').style.display = 'block';
        }
        
        function goToValuesSort() {
            if (!topGroup && document.getElementById('high-importance').querySelectorAll('.card').length > 0) {
                const id = parseInt(document.getElementById('high-importance').querySelectorAll('.card')[0].dataset.id);
                topGroup = groupsData.find(v => v.id === id);
            }
            
            if (!topGroup) {
                alert('–ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≤–∞–∂–Ω—É—é –æ–±–ª–∞—Å—Ç—å.');
                return;
            }
            
            document.getElementById('summary-groups').style.display = 'none';
            document.getElementById('instructions-values').style.display = 'block';
            document.getElementById('values-sorting-area').style.display = 'block';
            document.getElementById('selected-group-title').innerHTML = `<strong>${topGroup.title}</strong>. –†–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç–µ —Ü–µ–Ω–Ω–æ—Å—Ç–∏, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å —ç—Ç–æ–π –æ–±–ª–∞—Å—Ç—å—é.`;
            
            document.getElementById('modal-domain-name').textContent = topGroup.title;
            
            initializeValuesCards();
            
            setTimeout(() => {
                initAllMobileNavigations();
            }, 100);
        }
        
        function initializeValuesCards() {
            const highZone = document.getElementById('values-high');
            const mediumZone = document.getElementById('values-medium');
            const lowZone = document.getElementById('values-low');
            
            if (!highZone || !mediumZone || !lowZone) return;
            
            highZone.innerHTML = '';
            mediumZone.innerHTML = '';
            lowZone.innerHTML = '';
            
            values40.forEach(value => {
                const card = document.createElement('div');
                card.className = 'value-card';
                card.dataset.id = value.id;
                
                if (value.id === 37) {
                    card.classList.add('editable-card');
                    card.innerHTML = `
                        <span class="edit-icon">‚úèÔ∏è</span>
                        <div class="value-card-title">${value.title}</div>
                        <div class="value-card-desc">${value.desc}</div>
                    `;
                    
                    card.addEventListener('click', function(e) {
                        if (!this.classList.contains('dragging')) {
                            openEditModal(this);
                        }
                    });
                } else {
                    card.innerHTML = `
                        <div class="value-card-title">${value.title}</div>
                        <div class="value-card-desc">${value.desc}</div>
                    `;
                }
                
                card.addEventListener('dragstart', handleDragStart);
                card.addEventListener('dragend', handleDragEnd);
                addTouchDrag(card); // –î–æ–±–∞–≤–ª—è–µ–º pointer support
                
                mediumZone.appendChild(card);
            });
            
            setupDropZones();
            
            setTimeout(() => {
                initAllMobileNavigations();
            }, 100);
        }
        
        function openEditModal(cardElement) {
            const modal = document.getElementById('editValueModal');
            const titleInput = document.getElementById('customValueTitle');
            const descInput = document.getElementById('customValueDesc');
            
            const currentTitle = cardElement.querySelector('.value-card-title').textContent;
            const currentDesc = cardElement.querySelector('.value-card-desc').textContent;
            
            titleInput.value = currentTitle === '–î—Ä—É–≥–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å' ? '' : currentTitle;
            descInput.value = currentDesc === '–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π —Ü–µ–Ω–Ω–æ—Å—Ç–∏' ? '' : currentDesc;
            
            modal.classList.add('active');
            titleInput.focus();
            
            const enterHandler = function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    saveCustomValue(cardElement);
                }
            };
            
            titleInput.removeEventListener('keydown', enterHandler);
            descInput.removeEventListener('keydown', enterHandler);
            
            titleInput.addEventListener('keydown', enterHandler);
            descInput.addEventListener('keydown', enterHandler);
            
            modal.onclick = function(e) {
                if (e.target === modal) {
                    closeEditModal();
                }
            };
        }
        
        function saveCustomValue(cardElement) {
            const titleInput = document.getElementById('customValueTitle');
            const descInput = document.getElementById('customValueDesc');
            
            const newTitle = titleInput.value.trim();
            const newDesc = descInput.value.trim();
            
            if (!newTitle) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ü–µ–Ω–Ω–æ—Å—Ç–∏');
                titleInput.focus();
                return;
            }
            
            cardElement.querySelector('.value-card-title').textContent = newTitle;
            cardElement.querySelector('.value-card-desc').textContent = newDesc || '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å';
            
            closeEditModal();
            
            const highZone = document.getElementById('values-high');
            highZone.appendChild(cardElement);
            
            cardElement.onclick = function(e) {
                if (!this.classList.contains('dragging')) {
                    openEditModal(this);
                }
            };
        }
        
        function closeEditModal() {
            const modal = document.getElementById('editValueModal');
            modal.classList.remove('active');
        }
        
        function resetValuesCards() {
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —Å–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ –∫–∞—Ä—Ç–æ—á–∫–∏ —Ü–µ–Ω–Ω–æ—Å—Ç–µ–π?')) {
                initializeValuesCards();
            }
        }
        
        function proceedFromValuesSort() {
            const highCards = Array.from(document.getElementById('values-high').querySelectorAll('.value-card'));
            
            if (highCards.length > 4) {
                needsRefinedSort = true;
                showRefinedSort(highCards);
            } else {
                needsRefinedSort = false;
                showFinalValuesSummary();
            }
        }
        
        function showRefinedSort(highCards) {
            document.getElementById('values-sorting-area').style.display = 'none';
            document.getElementById('instructions-values').style.display = 'none';
            document.getElementById('instructions-refined').style.display = 'block';
            document.getElementById('refined-sorting-area').style.display = 'block';
            
            const titleHeading = document.getElementById('refined-title-heading');
            titleHeading.textContent = `–®–∞–≥ 5. –£—Ç–æ—á–Ω–µ–Ω–∏–µ${topGroup ? ' - ' + topGroup.title : ''}`;
            
            const refinedIntro = document.getElementById('refined-intro-text');
            refinedIntro.innerHTML = `–£ –≤–∞—Å –≤—ã–±—Ä–∞–Ω–æ ${highCards.length} –≤–∞–∂–Ω—ã—Ö —Ü–µ–Ω–Ω–æ—Å—Ç–µ–π. –†–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –∏—Ö –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º.`;
            
            const highestZone = document.getElementById('refined-highest');
            const mediumZone = document.getElementById('refined-medium');
            const lowZone = document.getElementById('refined-low');
            
            highestZone.innerHTML = '';
            mediumZone.innerHTML = '';
            lowZone.innerHTML = '';
            
            highCards.forEach(card => {
                const newCard = card.cloneNode(true);
                newCard.addEventListener('dragstart', handleDragStart);
                newCard.addEventListener('dragend', handleDragEnd);
                addTouchDrag(newCard); // –î–æ–±–∞–≤–ª—è–µ–º touch support
                
                if (newCard.classList.contains('editable-card')) {
                    newCard.addEventListener('click', function(e) {
                        if (!this.classList.contains('dragging')) {
                            openEditModal(this);
                        }
                    });
                }
                
                mediumZone.appendChild(newCard);
            });
            
            setupDropZones();
        }
        
        function resetRefinedCards() {
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —Å–±—Ä–æ—Å–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫–∏?')) {
                const highCards = Array.from(document.getElementById('values-high').querySelectorAll('.value-card'));
                showRefinedSort(highCards);
            }
        }
        
        function proceedFromRefinedSort() {
            const highestCards = Array.from(document.getElementById('refined-highest').querySelectorAll('.value-card'));
            
            if (highestCards.length > 1) {
                startValuesComparison(highestCards);
            } else {
                showFinalValuesSummary();
            }
        }
        
        function startValuesComparison(highestCards) {
            topValuesForComparison = highestCards.map(card => {
                const id = parseInt(card.dataset.id);
                const title = card.querySelector('.value-card-title').textContent;
                const desc = card.querySelector('.value-card-desc').textContent;
                
                // –î–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏ –±–µ—Ä–µ–º –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ DOM
                return {
                    id: id,
                    title: title,
                    desc: desc
                };
            });
            
            valuesComparisons = [];
            for (let i = 0; i < topValuesForComparison.length; i++) {
                for (let j = i + 1; j < topValuesForComparison.length; j++) {
                    valuesComparisons.push([topValuesForComparison[i], topValuesForComparison[j]]);
                }
            }
            
            valuesComparisonResults = {};
            topValuesForComparison.forEach(value => {
                valuesComparisonResults[value.id] = 0;
            });
            
            currentValuesComparisonIndex = 0;
            
            document.getElementById('instructions-refined').style.display = 'none';
            document.getElementById('refined-sorting-area').style.display = 'none';
            document.getElementById('instructions-values-comparison').style.display = 'block';
            document.getElementById('values-comparison-area').style.display = 'block';
            
            showValuesComparison();
        }
        
        function showValuesComparison() {
            if (currentValuesComparisonIndex >= valuesComparisons.length) {
                rankedTopValues = topValuesForComparison.sort((a, b) => 
                    valuesComparisonResults[b.id] - valuesComparisonResults[a.id]
                );
                showFinalValuesSummary();
                return;
            }
            
            const [valueA, valueB] = valuesComparisons[currentValuesComparisonIndex];
            
            document.getElementById('values-comparison-progress').textContent = 
                `–í–æ–ø—Ä–æ—Å ${currentValuesComparisonIndex + 1} –∏–∑ ${valuesComparisons.length}`;
            
            const cardsContainer = document.getElementById('values-comparison-cards');
            cardsContainer.innerHTML = `
                <div class="comparison-card" onclick="selectValueInComparison(${valueA.id})">
                    <div class="comparison-card-title">${valueA.title}</div>
                    <div class="comparison-card-questions">${valueA.desc}</div>
                </div>
                <div class="comparison-card" onclick="selectValueInComparison(${valueB.id})">
                    <div class="comparison-card-title">${valueB.title}</div>
                    <div class="comparison-card-questions">${valueB.desc}</div>
                </div>
            `;
        }
        
        function selectValueInComparison(selectedId) {
            valuesComparisonResults[selectedId]++;
            currentValuesComparisonIndex++;
            showValuesComparison();
        }
        
        function backFromFinalSummary() {
            document.getElementById('final-values-summary').style.display = 'none';
            
            if (rankedTopValues.length > 0) {
                document.getElementById('instructions-values-comparison').style.display = 'block';
                document.getElementById('values-comparison-area').style.display = 'block';
            } else if (needsRefinedSort) {
                document.getElementById('instructions-refined').style.display = 'block';
                document.getElementById('refined-sorting-area').style.display = 'block';
            } else {
                document.getElementById('instructions-values').style.display = 'block';
                document.getElementById('values-sorting-area').style.display = 'block';
            }
        }
        
        function showFinalValuesSummary() {
            let highestCards = [];
            let highCards = [];
            let topValueName = '';
            
            if (rankedTopValues.length > 0) {
                highestCards = rankedTopValues;
                topValueName = rankedTopValues[0].title;
                
                const otherHighCards = Array.from(document.getElementById('refined-medium').querySelectorAll('.value-card'))
                    .filter(card => !rankedTopValues.find(v => v.id === parseInt(card.dataset.id)));
                highCards = otherHighCards;
            } else if (needsRefinedSort) {
                highestCards = Array.from(document.getElementById('refined-highest').querySelectorAll('.value-card'));
                if (highestCards.length > 0) {
                    topValueName = highestCards[0].querySelector('.value-card-title').textContent;
                }
                highCards = Array.from(document.getElementById('refined-medium').querySelectorAll('.value-card'));
            } else {
                highCards = Array.from(document.getElementById('values-high').querySelectorAll('.value-card'));
                if (highCards.length > 0) {
                    topValueName = highCards[0].querySelector('.value-card-title').textContent;
                }
            }
            
            document.getElementById('domain-name').textContent = topGroup ? topGroup.title : '';
            document.getElementById('top-value-name').textContent = topValueName;
            
            let html = '';
            
            if (topGroup) {
                html += `<div class="final-values-summary-header"><strong>${topGroup.title}</strong></div>`;
            }
            
            if (highestCards.length > 0 || rankedTopValues.length > 0) {
                html += `<div class="final-values-summary-section"><h3>–°–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ</h3><ul class="ranked-list">`;
                if (rankedTopValues.length > 0) {
                    rankedTopValues.forEach(value => {
                        html += `<li>${value.title}</li>`;
                    });
                } else {
                    highestCards.forEach(card => {
                        html += `<li>${card.querySelector('.value-card-title').textContent}</li>`;
                    });
                }
                html += `</ul></div>`;
            }
            
            if (highCards.length > 0) {
                html += `<div class="final-values-summary-section">`;
                html += `<div class="final-values-group-label">`;
                html += `<span class="final-values-group-dot"></span>`;
                html += `<span>–û—á–µ–Ω—å –≤–∞–∂–Ω–æ</span>`;
                html += `</div>`;
                html += `<ul>`;
                highCards.forEach(card => {
                    const title = card.title || card.querySelector('.value-card-title').textContent;
                    html += `<li>${title}</li>`;
                });
                html += `</ul></div>`;
            }
            
            document.getElementById('final-values-summary-content').innerHTML = html;
            
            document.getElementById('values-sorting-area').style.display = 'none';
            document.getElementById('refined-sorting-area').style.display = 'none';
            document.getElementById('instructions-refined').style.display = 'none';
            document.getElementById('instructions-values-comparison').style.display = 'none';
            document.getElementById('values-comparison-area').style.display = 'none';
            document.getElementById('final-values-summary').style.display = 'block';
        }
        
        function saveFinalValuesResults() {
            let highestCards = [];
            let highCards = [];
            let topValueName = '';
            
            if (rankedTopValues.length > 0) {
                highestCards = rankedTopValues;
                topValueName = rankedTopValues[0].title;
                
                const otherHighCards = Array.from(document.getElementById('refined-medium').querySelectorAll('.value-card'))
                    .filter(card => !rankedTopValues.find(v => v.id === parseInt(card.dataset.id)));
                highCards = otherHighCards;
            } else if (needsRefinedSort) {
                highestCards = Array.from(document.getElementById('refined-highest').querySelectorAll('.value-card'));
                if (highestCards.length > 0) {
                    topValueName = highestCards[0].querySelector('.value-card-title').textContent;
                }
                highCards = Array.from(document.getElementById('refined-medium').querySelectorAll('.value-card'));
            } else {
                highCards = Array.from(document.getElementById('values-high').querySelectorAll('.value-card'));
                if (highCards.length > 0) {
                    topValueName = highCards[0].querySelector('.value-card-title').textContent;
                }
            }
            
            let text = 'üéØ –û–ü–†–ï–î–ï–õ–ï–ù–ò–ï –õ–ò–ß–ù–´–• –¶–ï–ù–ù–û–°–¢–ï–ô\n';
            text += '========================================\n\n';
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –®–∞–≥–∞ 3 (—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –æ–±–ª–∞—Å—Ç–µ–π)
            text += 'üìã –®–ê–ì 3: –°–û–†–¢–ò–†–û–í–ö–ê –û–ë–õ–ê–°–¢–ï–ô –ñ–ò–ó–ù–ò\n';
            text += '---------------------------------\n\n';
            
            if (rankedHighGroups && rankedHighGroups.length > 0) {
                text += 'üî• –û–ß–ï–ù–¨ –í–ê–ñ–ù–û:\n';
                rankedHighGroups.forEach((group, idx) => {
                    text += `${idx + 1}. ${group.title}\n`;
                });
                text += '\n';
            }
            
            const mediumGroupCards = Array.from(document.getElementById('medium-importance').querySelectorAll('.card'));
            if (mediumGroupCards.length > 0) {
                text += '‚öñÔ∏è –°–†–ï–î–ù–ï:\n';
                mediumGroupCards.forEach(card => {
                    text += `‚Ä¢ ${card.querySelector('.card-title').textContent}\n`;
                });
                text += '\n';
            }
            
            const lowGroupCards = Array.from(document.getElementById('low-importance').querySelectorAll('.card'));
            if (lowGroupCards.length > 0) {
                text += 'üìå –ù–ï –í–ê–ñ–ù–û:\n';
                lowGroupCards.forEach(card => {
                    text += `‚Ä¢ ${card.querySelector('.card-title').textContent}\n`;
                });
                text += '\n';
            }
            
            text += '========================================\n\n';
            text += `–í—ã–±—Ä–∞–Ω–Ω–∞—è –æ–±–ª–∞—Å—Ç—å: ${topGroup ? topGroup.title : '–ù–µ —É–∫–∞–∑–∞–Ω–∞'}\n\n`;
            
            if (highestCards.length > 0) {
                text += 'üìå –°–ê–ú–û–ï –í–ê–ñ–ù–û–ï:\n';
                text += '---------------------------------\n';
                if (rankedTopValues.length > 0) {
                    rankedTopValues.forEach((v, idx) => {
                        text += `${idx + 1}. ${v.title}\n`;
                    });
                } else {
                    highestCards.forEach(c => {
                        text += `‚Ä¢ ${c.querySelector('.value-card-title').textContent}\n`;
                    });
                }
                text += '\n';
            }
            
            if (highCards.length > 0) {
                text += '‚úÖ –û–ß–ï–ù–¨ –í–ê–ñ–ù–û:\n';
                text += '---------------\n';
                highCards.forEach(c => {
                    const title = c.title || c.querySelector('.value-card-title').textContent;
                    text += `‚Ä¢ ${title}\n`;
                });
                text += '\n';
            }
            
            text += '\n========================================\n';
            text += 'COMMITTED ACTION\n';
            text += '========================================\n\n';
            text += `1. –ü–æ–¥—É–º–∞–π—Ç–µ –æ —Å—Ñ–µ—Ä–µ "${topGroup ? topGroup.title : ''}" –∏ —Ü–µ–Ω–Ω–æ—Å—Ç–∏ "${topValueName}", –∫–æ—Ç–æ—Ä–∞—è –æ–∫–∞–∑–∞–ª–∞—Å—å –¥–ª—è –≤–∞—Å –Ω–∞–∏–±–æ–ª–µ–µ –≤–∞–∂–Ω–æ–π.\n`;
            text += `   –ó–∞ 10‚Äì30 –º–∏–Ω—É—Ç –æ–ø–∏—à–∏—Ç–µ, —á—Ç–æ –∑–Ω–∞—á–∏—Ç –¥–ª—è –≤–∞—Å –∂–∏—Ç—å –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å —ç—Ç–æ–π —Ü–µ–Ω–Ω–æ—Å—Ç—å—é?\n\n`;
            text += `2. –ß—Ç–æ –≤—ã –º–æ–∂–µ—Ç–µ —Å–¥–µ–ª–∞—Ç—å —É–∂–µ –Ω–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ, —á—Ç–æ–±—ã –ø—Ä–∏–±–ª–∏–∑–∏—Ç—å—Å—è –∫ —ç—Ç–æ–π —Ü–µ–Ω–Ω–æ—Å—Ç–∏,\n`;
            text += `   —Å–¥–µ–ª–∞—Ç—å —Ö–æ—Ç—è –±—ã –Ω–µ–±–æ–ª—å—à–æ–π —à–∞–≥?\n\n`;
            text += `3. –ö–∞–∫–∏–µ –±–∞—Ä—å–µ—Ä—ã, –º—ã—Å–ª–∏, —ç–º–æ—Ü–∏–∏ –º–æ–≥—É—Ç –ø–æ–º–µ—à–∞—Ç—å –≤–∞–º?\n\n`;
            text += '\n========================================\n';
            text += `–î–∞—Ç–∞: ${new Date().toLocaleDateString('ru-RU')}\n`;
            
            const blob = new Blob([text], { type: 'text/plain;charset=utf-8' });
            const link = document.createElement('a');
            const fileName = `—Ü–µ–Ω–Ω–æ—Å—Ç–∏_${new Date().toISOString().split('T')[0]}.txt`;
            link.href = URL.createObjectURL(blob);
            link.download = fileName;
            link.click();
            URL.revokeObjectURL(link.href);
        }
        
        
        // –ú–æ–±–∏–ª—å–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É –∫–æ–ª–æ–Ω–∫–∞–º–∏
        function initMobileColumnNavigation(containerSelector) {
            if (window.innerWidth > 768) return;

            const container = document.querySelector(containerSelector);
            if (!container || getComputedStyle(container).display === 'none') return;

            const wrapper = container.querySelector('.columns-wrapper, .values-columns');
            if (!wrapper) return;

            const columns = wrapper.querySelectorAll('.column, .values-column');
            if (columns.length !== 3) return;

            if (wrapper.dataset.mobileNavInit === 'true') return;
            wrapper.dataset.mobileNavInit = 'true';

            let currentIndex = 1;

            function updateColumnsView() {
                columns.forEach((col) => {
                    col.classList.remove('mobile-hidden', 'mobile-active', 'mobile-side-button', 'mobile-left', 'mobile-right');
                });

                columns[currentIndex].classList.add('mobile-active');

                if (currentIndex > 0) {
                    columns[currentIndex - 1].classList.add('mobile-side-button', 'mobile-left');
                }

                if (currentIndex < columns.length - 1) {
                    columns[currentIndex + 1].classList.add('mobile-side-button', 'mobile-right');
                }

                columns.forEach((col, idx) => {
                    if (idx < currentIndex - 1 || idx > currentIndex + 1) {
                        col.classList.add('mobile-hidden');
                    }
                });
            }

            columns.forEach((col, idx) => {
                col.addEventListener('click', function(e) {
                    // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –∫–ª–∏–∫–∏ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö
                    if (e.target.closest('.card') || e.target.closest('.value-card')) {
                        return;
                    }
                    
                    if (this.classList.contains('mobile-side-button')) {
                        currentIndex = idx;
                        updateColumnsView();
                    }
                });
            });

            updateColumnsView();
        }

        function initAllMobileNavigations() {
            if (window.innerWidth > 768) return;

            document.querySelectorAll('[data-mobile-nav-init]').forEach(el => {
                el.dataset.mobileNavInit = 'false';
            });

            initMobileColumnNavigation('.sorting-container');
            initMobileColumnNavigation('.values-container');
            initMobileColumnNavigation('.refined-sorting-container');
        }
        
        window.onload = function() {
            initializeGroupCards();
            setupDropZones();
            initAllMobileNavigations();
        };

        window.addEventListener('resize', function() {
            if (window.innerWidth <= 768) {
                initAllMobileNavigations();
            }
        });
    </script>
</body>
</html>
